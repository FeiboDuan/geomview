#! /bin/sh
#
# $Id: packbuild.in,v 1.4 2000/11/18 19:09:08 mphillips Exp $
#
dnl
dnl This is file 'packbuild.in', the template from which 'packbuild'
dnl is created.  To change 'packbuild', edit this file and run
dnl 'make packbuild'.
dnl
dnl There should NOT be a blank line between the last 'dnl' line
dnl below, and the '#! /bin/sh' line:
dnl
dnl
changequote([,])
define(LS,[
size=`ls -l $1`
echo "echo \"    remote: $size\""
echo "size=\`ls -l $1\`"
echo "echo \"     local: \$size\""
])
define(PACK,[
echo "if test -f '$1' && test \"\$first_param\" != \"-c\"; then"
echo "  echo 'x -' SKIPPING '$1' '(file already exists)'"
echo "else"
echo "  echo 'x -' extracting '$1' '(text)'"
echo "  sed 's/^X//' << 'SHAR_EOF' > '$1'"
sed 's/^/X/' < $1
echo ""
echo "SHAR_EOF"
LS($1)
echo "fi"
])
dnl
#
# This script is not intended to be run directly; it's used
# internally by the 'build' script.  See 'build' for details.
#
build_id=`cat build.id`
build_id=`echo $build_id`
rm build.id
packbuild_id='$Id: packbuild.in,v 1.4 2000/11/18 19:09:08 mphillips Exp $'
(
echo "#! /bin/sh"
echo "##############################################################"
echo "# Geomview build output"
echo "# generated with"
echo "#   $build_id"
echo "#   $packbuild_id"
echo "# by `whoami` on `hostname` at `date`"
echo "##############################################################"
echo "first_param=\"\$1\""
PACK(build)
PACK(configure.out)
PACK(config.log)
PACK(config.cache)
PACK(config.status)
PACK(make.out)
PACK(export.out)
) > build.out

echo "wrote build.out"
